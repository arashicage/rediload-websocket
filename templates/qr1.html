<div class="container" style="margin-top: 40px;">

    <form class="form-horizontal">

        <div class="form-group">
            <label class="col-sm-2 control-label">二维码内容</label>

            <div class="col-sm-10">
                <textarea id="content" name="content" style="resize:vertical;" class="form-control" rows="4" placeholder="用于生成二维码的内容" oninput="OnInput (event)" onpropertychange="OnPropChanged (event)"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label"> 容错等级</label>
            <div class="col-sm-10">
                <label class="radio-inline">
                    <input type="radio" name="level" id="level_l" value="L" checked onchange="refeshQR();return false;"> L - 7%
                </label>
                <label class="radio-inline">
                    <input type="radio" name="level" id="level_m" value="M" onchange="refeshQR();return false;"> M - 15%
                </label>
                <label class="radio-inline">
                    <input type="radio" name="level" id="level_q" value="Q" onchange="refeshQR();return false;"> Q - 25%
                </label>
                <label class="radio-inline">
                    <input type="radio" name="level" id="level_h" value="H" onchange="refeshQR();return false;"> H - 30%
                </label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label"> &nbsp;</label>
            <div class="col-sm-10">
                <img height="400" width="400" id="qrcode" src="/qr?&data=长城计算机软件与系统有限公司" />
            </div>
        </div>

    </form>
</div>

<script type="text/javascript">
    // Firefox, Google Chrome, Opera, Safari, Internet Explorer from version 9
    function OnInput(event) {
        $("#qrcode").attr("src", "/qr?&data=" + $('#content').val() + "&level=" + $("input[name='level']:checked").val());
    }

    function refeshQR() {
        $("#qrcode").attr("src", "/qr?&data=" + $('#content').val() + "&level=" + $("input[name='level']:checked").val());
    }
    // Internet Explorer
    /*
    function OnPropChanged(event) {
        if (event.propertyName.toLowerCase() == "value") {
            $("#qrcode").attr("src", "http://localhost:8889/?&data=" + $('#content').val());
        }
    }
    */

</script>
